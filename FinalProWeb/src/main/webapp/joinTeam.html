<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>加入報團</title>
    <!-- 響應式網站 -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Boostrap 導入程式 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
            crossorigin="anonymous"></script>
    <!-- 連結CSS外部檔案 -->
    <link rel="stylesheet" href="./css/joinTeam.css">
    <link rel="stylesheet" href="./css/navbar&footer.css">
    <!-- 連接Js外部檔案 -->

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- MDB頭像 -->
    <script type="text/javascript" src="./Js/mdb.min.js"></script>
    <script src="./Js/jquery.twbsPagination.js"></script>
</head>

<body>

<div class="wrapper">
    <!-- 導覽列 -->
    <header class="main-header">
        <div class="container">
            <a href="./index.html" class="Logo">
                <img src="./Images/logo3.png" alt="Logo" width="30" height="36">
                <h2>Join</h2>
            </a>
            <!-- 導覽列文字 -->
            <nav class="navbar-text">
                <a href="./latestNews.html">最新消息</a>
                <a href="./findGym.html">附近場館</a>
                <a href="./post.html">發起揪團</a>
                <a href="./joinTeam.html">加入報團</a>
            </nav>
            <nav class="navbar navbar-expand-lg">
                <div class="container-fluid">
                    <ul class="navbar-nav">
                        <!-- Avatar頭像 -->
                        <li class="nav-item Avatar dropdown">
                            <a class="nav-link dropdown-toggle d-flex align-items-center" href="#"
                               id="navbarDropdownMenuLink" role="button" data-mdb-toggle="dropdown"
                               aria-expanded="false">
                                <img src="./Images/user.png" class="rounded-circle" width="50" height="50"
                                     alt="Portrait of a Woman" loading="lazy"/>
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <li>
                                    <a class="dropdown-item" href="./login.html">登入</a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="./login.html">註冊</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    </header>


    <!-- 活動cards start -->
    <div class="con">
        <div class="joinTeam-card-group"></div>
        <!--頁碼-->
        <div class="d-flex justify-content-center">
            <ul class="oPage pagination-lg"></ul>
        </div>
        <!--頁碼-->
    </div>
    <!-- 活動cards end-->

    <!-- footer頁尾 -->
    <footer>
        <div class="footer-container">
            <div class="footer-section">
                <h4>更多</h4>
                <ul>
                    <li><a href="#">顧客服務</a></li>
                    <li><a href="#">人才招募</a></li>
                    <li><a href="#">網頁資訊</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>幫助</h4>
                <ul>
                    <li><a href="#">社群守則</a></li>
                    <li><a href="#">常見問題</a></li>
                    <li><a href="#">使用者指南</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>聯絡我們</h4>
                <ul>
                    <li><a href="#">加入我們</a></li>
                    <li><a href="#">會員服務</a></li>
                    <li><a href="#">企業報團</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>關於我們</h4>
                <ul>
                    <li><a href="#">我們的故事</a></li>
                    <li><a href="#">客服信箱</a></li>
                    <li><a href="#">社群媒體</a></li>
                </ul>
            </div>
        </div>
        <!-- Copyright -->
        <div class="Copyright">
            © 2021 Copyright: Sport Together
        </div>
        <script>
            //接收後端api
            $(function () {
                $.ajax({
                    type: 'get',
                    url: 'viewPostv1',
                    dataType: 'json',
                    data: {},
                    success: function (data) {
                        //設定數量及頁數
                        init('pagination', 4, 3);
                    },
                    error: function () {
                        alert("出错啦！");
                    }
                });
                //初始化 twbsPagination插件
                function init(id, count, num) {
                    $('.oPage').twbsPagination({
                        totalPages: num,//總頁數
                        startPage: 1,
                        visiblePages: count,//顯示頁數
                        first: '首頁',
                        prev: '上一頁',
                        next: '下一頁',
                        last: '尾頁',
                        //點擊產生活動卡片
                        onPageClick: function (event, page) {
                            console.log(page);//page當前頁數
                            $('.joinTeam-card-group').empty(); // 清除之前的data

                            $.ajax({
                                type: "get",
                                url: "viewPostv1",
                                async: true,
                                success: function (data) {
                                    var str = "";
                                    $.each(data.slice((page - 1) * count, page * count), function (idx, val) {
                                        str += "<div class='card' style='width: 450px;''><a href='activity.html?id=" + val.id + "'><img src='" + val.pic + "'class='card-img-top'></a><div class='card-body'><h5 class='card-title'>" + val.activityTitle + "</h5><p class='card-text'>" + val.description + "</p></div>";
                                        str += "<ul class='list-group list-group-flush'><li class='list-group-item'>" + val.activityTime + "</li><li class='list-group-item'>" + val.locationSub + "</li><li class='list-group-item'>" + val.level + "</li></ul>";
                                        str += "<div class='card-body'><img src='" + val.icon + "'style='width: 50px; height:50px; border-radius: 50%;'></a></div></div></div>";
                                    });
                                    $('.joinTeam-card-group').append(str);
                                }
                            });
                        }

                    })
                }
            });
        </script>
    </footer>
</div>

</body>

</html>